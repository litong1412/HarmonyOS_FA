!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.HMSAccount=t():e.HMSAccount=t()}(this,(function(){return(()=>{var e={625:function(e){e.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";(function(e){var n,a=0;t.a={uniqueId:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(a++,"_").concat((new Date).getTime(),"_").concat(Math.random())},log:function(e){console.log("".concat("hmsjsb: "," ").concat(e))},error:function(e){console.error("".concat("hmsjsb: "," ").concat(e))},getJSCore:function(){return n||(this.isWeex()?n=weex.requireModule("JSCore"):this.isRN()?console.log("this is RN"):n=this.isOHOS()?ModuleGroup.getGroup("AceModuleGroup/HmsBridge"):this.isQickApp()?e.requireAPI("service.jsb"):window.JSCore,n)},setJSCore:function(e){n=e},isWebView:function(){return"function"==typeof Window&&window instanceof Window},isWeex:function(){return"undefined"!=typeof weex},isRN:function(){return"undefined"!=typeof GLOBAL},isCordova:function(){return"undefined"!=typeof window&&void 0!==window.cordova&&!this.isCapacitor()},isCapacitor:function(){return"undefined"!=typeof window&&void 0!==window.Capacitor&&void 0!==window.Capacitor.Plugins.JSBCapacitorPlugin},isOHOS:function(){return"undefined"!=typeof ModuleGroup},isQickApp:function(){return void 0!==e&&void 0!==e.quickapp},getPositionInfoById:function(e){var t=document.getElementById(e),n=t.getBoundingClientRect(),a=n.left+t.scrollLeft,r=n.top+t.scrollTop;return{left:a,top:r,width:n.right-a,height:n.bottom-r}}}}).call(this,n(2))},function(e,t,n){e.exports=n(3)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"hmsjsb",(function(){return f})),n.d(t,"callbackMap",(function(){return s})),n.d(t,"eventMap",(function(){return u})),n.d(t,"hmsbase",(function(){return y}));var a=n(0);function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var o,c,s={},u={};function l(e,t,n){var r={id:a.a.uniqueId("cb_"),success:e,fail:t,complete:n};return s[r.id]=r,r.id}function d(e){var t;try{t=JSON.parse(e)}catch(n){t={errCode:-1,errMsg:"callback result parsing error"},a.a.error("json parse failed, ".concat(e))}return t}var f={invoke:function(e){var t=this,n=e.apiName,r=e.args,i=e.success,o=e.fail,c=e.complete;if(a.a.log("invoke start, {apiName: ".concat(n)),n){var s=JSON.stringify(r);p();var u={};u.apiName=n,u.args=r;var v={bundleName:"com.huawei.hms.adapter",abilityName:"JsbInternalAbility"};if(!(i&&"function"==typeof i||o&&"function"==typeof o||c&&"function"==typeof c)){if(a.a.isOHOS())return v.messageCode=1002,v.data=u,v.abilityType=1,v.syncOption=0,function(e){return new Promise((function(t,n){e.then((function(e){t(d(e))})).catch((function(e){n(d(e))}))}))}(FeatureAbility.callAbility(v));if(a.a.isCordova())return new Promise((function(e,t){var a={method:n,data:r};window.cordova.exec((function(t){e(d(t))}),(function(e){t(d(e))}),"JSCore","invoke",a)}));if(a.a.isCapacitor()){var g={method:n,data:r};return window.Capacitor.Plugins.JSBCapacitorPlugin.invoke(g)}return new Promise((function(e){e(d(a.a.getJSCore().invoke(n,s)))}))}var m=l(i,o,c);if(a.a.log("invoke Async, callbackId:".concat(m)),a.a.isOHOS())u.callbackId=m,v.messageCode=1001,v.data=u,v.abilityType=1,v.syncOption=1,FeatureAbility.callAbility(v).then((function(e){var t=d(e);"callback result parsing error"!==t.errMsg&&f.callback(m,t.data)}),(function(e){a.a.error("call ability failed ".concat(e))}));else if(a.a.isQickApp())a.a.getJSCore().invokeAsync({apiName:n,args:s,callbackId:m,callback:this.callback});else if(a.a.isCordova()){var b={method:n,data:r};window.cordova.exec((function(e){t.callback(m,e)}),(function(e){t.callback(m,e)}),"JSCore","invokeAsync",b)}else if(a.a.isCapacitor()){var y={method:n,data:r};window.Capacitor.Plugins.JSBCapacitorPlugin.invokeAsync(y).then((function(e){f.callback(m,e.value)})).catch((function(e){a.a.error("capacitor adapter invokeAsync failed ".concat(JSON.stringify(e)))}))}else a.a.getJSCore().invokeAsync(n,s,m)}},callback:function(e,t){if(a.a.log("callback start, cbId: ".concat(e)),t){var n=s[e];if(n){!function(e){delete s[e.id]}(n);var r=d(t);if("callback result parsing error"===r.errMsg&&"function"==typeof n.fail)return void n.fail(r);var i={errCode:r.errCode,errMsg:r.errMsg||"",data:r.data,extras:r.extras};0===r.errCode?("function"==typeof n.success&&n.success(i),"function"==typeof n.complete&&n.complete(i)):("function"==typeof n.fail&&n.fail(i),"function"==typeof n.complete&&n.complete(i))}}else console.error("callback params is null")},on:function(e,t,n){if(a.a.log("on start, eventName: ".concat(e)),n&&a.a.isOHOS())return function(e,t,n){var r={id:a.a.uniqueId("ecb_"),eventName:e,callback:t};return n[r.id]=r,r.id}(e,t,n);if(!a.a.isWeex()){if(a.a.isRN())return c.addListener(e,(function(e){var n;try{n=JSON.parse(e)}catch(e){return}t(n)}));if(a.a.isCapacitor())return window.Capacitor.Plugins.JSBCapacitorPlugin.addListener(e,(function(e){t(e)}));a.a.isCordova()&&0===Object.keys(u).length&&window.cordova.exec(f.cordovaHandler,f.cordovaHandler,"JSCore","addEventListener",{eventName:e});var r=a.a.uniqueId("subscribeEvent_");a.a.log("on browser, offKey: ".concat(r));var i=u["event_"+e];return i||(i={},u["event_"+e]=i),i[r]=t,r}weex.requireModule("globalEvent").addEventListener(e,t)},off:function(e,t,n){if(a.a.log("off start, eventName: ".concat(e,", offKey: ").concat(t)),n&&a.a.isOHOS())delete n[t];else if(a.a.isWeex())weex.requireModule("globalEvent").removeEventListener(e);else if(a.a.isRN()||a.a.isCapacitor())t&&t.remove();else{var r=u["event_"+e];if(r)if("string"==typeof t)delete r[t];else if("function"==typeof t){var i=Object.keys(r).filter((function(e){return r[e]===t}));i&&i.length&&delete r[i[0]]}}},publishHandler:function(e,t){var n;a.a.log("publishHandler start, eventName: ".concat(e));try{n=JSON.parse(t)}catch(e){a.a.error("pushEvent data parsing error"),n=t}var r=u["event_"+e];r&&Object.keys(r).forEach((function(e){var t=r[e];"function"==typeof t&&t(n)}))},cordovaHandler:function(e){e&&f.publishHandler(e.event,e.data)},createView:function(e){var t=e.apiName,n=e.args,i=e.containerId,o=e.success,c=e.fail,s=e.complete,u=void 0!==n?JSON.stringify(n):"",d=l(o,c,s);if(a.a.isWebView()){var f,p=a.a.getPositionInfoById(i);(f=a.a.getJSCore()).createView.apply(f,[t,u,d,i].concat(r(p)))}else a.a.getJSCore().createView(t,u,d,i)},scrollViewToY:function(e,t){a.a.isWebView()&&a.a.getJSCore().scrollViewToY(e,t)},init:function(e){if(a.a.log("init start"),a.a.isRN()){var t=e.NativeModules;a.a.setJSCore(t.JSCore),c=e.DeviceEventEmitter,p(),this.utils=t.ModuleUtils}else if(a.a.isOHOS()){var n={bundleName:"com.huawei.hms.adapter",abilityName:"JsbInternalAbility",messageCode:1005,abilityType:1,syncOption:1};FeatureAbility.subscribeAbilityEvent(n,(function(t){var n;try{n=JSON.parse(t)}catch(e){return void a.a.error("subscribe event result parse error: ".concat(t))}var r=n.data.eventName;Object.keys(e).forEach((function(t){var a=e[t];r===a.eventName&&a.callback(n.data.eventResult)}))})).catch((function(e){return a.a.error("subscribe event fail, ".concat(e))}))}},destroy:function(){a.a.log("destroy start"),a.a.isRN()?o&&o.remove():a.a.isCordova()&&window.cordova.exec(f.cordovaHandler,f.cordovaHandler,"JSCore","removeEventListener")}};function p(){a.a.isWebView()?window.JSBridge=f:a.a.isWeex()?f.on("weexJsbCallback",(function(e){var t=e.id,n=e.value;f.callback(t,n)})):a.a.isRN()?c&&(o&&o.remove(),o=f.on("rnJsbCallback",(function(e){var t=e.id,n=e.value;f.callback(t,n)}))):a.a.isQickApp()&&(a.a.getJSCore().onEventCallBack=f.publishHandler)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=e.apiName,n=e.args,a=e.success,r=e.fail,i=e.complete;return f.invoke({apiName:t,args:n,success:a,fail:r,complete:i})}p();var y={setSPvalue:function(e){var t=e.key,n=e.value,a=e.spname;return b(g(g({},e),{},{args:{key:t,value:n,spname:a},apiName:"sp.setSPvalue"}))},getSPvalue:function(e){var t=e.key,n=e.spname;return b(g(g({},e),{},{args:{key:t,spname:n},apiName:"sp.getSPvalue"}))},removeSPvalue:function(e){var t=e.key,n=e.spname;return b(g(g({},e),{},{args:{key:t,spname:n},apiName:"sp.removeSPvalue"}))},getMetadata:function(e){var t=e.key,n=e.packagename;return b(g(g({},e),{},{args:{key:t,packagename:n},apiName:"metadata.getvalue"}))},getPackageName:function(e){return b(g(g({},e),{},{apiName:"package.name"}))},getAppId:function(e){return b(g(g({},e),{},{apiName:"base.getappid"}))},getAaId:function(e){return b(g(g({},e),{},{apiName:"base.getaaid"}))},getUid:function(e){return b(g(g({},e),{},{apiName:"base.getUid"}))},getAppVersion:function(e){return b(g(g({},e),{},{apiName:"base.getAppVersion"}))},getAgcConfig:function(e){var t=e.key;return b(g(g({},e),{},{args:{key:t},apiName:"base.getAgcConfig"}))},reportEntry:function(e){var t=e.uri,n=e.kitSdkVersion;return b(g(g({},e),{},{args:{uri:t,kitSdkVersion:n},apiName:"analytics.reportEntry"}))},reportExit:function(e){var t=e.uri,n=e.transactId,a=e.statusCode,r=e.errorCode,i=e.kitSdkVersionName;return b(g(g({},e),{},{args:{uri:t,transactId:n,statusCode:a,errorCode:r,kitSdkVersionName:i},apiName:"analytics.reportExit"}))},encrypt:function(e){var t=e.encryptWord;return b(g(g({},e),{},{args:{encryptWord:t},apiName:"security.encrypter"}))},decrypt:function(e){var t=e.encryptWord;return b(g(g({},e),{},{args:{encryptWord:t},apiName:"security.decrypter"}))},config:function(e){var t=e.subId;return b(g(g({},e),{},{args:{subId:t},apiName:"config.auth"}))},isJsbKitAvailable:function(e){var t=e.min_api_level;return b(g(g({},e),{},{args:{min_api_level:t},apiName:"update.availability"}))},upgrade:function(e){return b(g(g({},e),{},{apiName:"update.upgrade"}))},reload:function(e){return b(g(g({},e),{},{apiName:"update.reload"}))}}}])},841:(e,t,n)=>{"use strict";n.d(t,{default:()=>v});var a=n(625);const r={0:"SUCCESS","-1":"FAILED","-8":"NOT_SILENT_SIGN_IN_OR_WRONG_PARAMETER",2002:"SIGN_IN_AUTH",2003:"SIGN_IN_PARAMS_ERROR",2005:"SIGN_IN_NETWORK_ERROR",2009:"SIGN_IN_AUTH_SERVER_FAILED",2012:"SIGN_IN_CANCELLED",2013:"SIGN_IN_EXECUTING",700111:"UPGRADE_FAILED",907135002:"NAMING_INVALID"},i={SIGN_IN:"com.huawei.hms.jos.signIn",HWID_SILENT_SIGNIN:"hwid.silentSignIn",HWID_SIGN_IN_BACKEND:"hwid.signinbackend",HWID_SIGN_OUT:"hwid.signout",HWID_REVOKE_ACCESS:"hwid.revokeAccess",HWID_GET_CHANNEL:"hwid.getChannel"};Object.freeze(i);const o=50008300,c=()=>a.hmsbase.getPackageName(),s=(e,t)=>a.hmsbase.reportEntry({uri:e,kitSdkVersion:t}),u=(e,t,n,r,i)=>a.hmsbase.reportExit({uri:e,transactId:t,statusCode:n,errorCode:r,kitSdkVersionName:i}),l={invoke:e=>a.hmsjsb.invoke(e),assignCommonArgs:async()=>({packageName:(await c()).data}),_invoke:(e,t={})=>new Promise((async(n,i)=>{var c=new Date;const d=t=>{e.uri&&t.extras&&console.log(`api getTransactId ${e.uri} done ${t.extras.transactId} `),0===t.errCode?n({status:r[t.errCode]||"",resultCode:t.errCode,data:t.data?t.data.signInHuaweiId?t.data.signInHuaweiId:t.data:null}):n({status:r[t.errCode]||"",resultCode:t.errCode,data:t.data?t.data:"null"})},f=e=>{i({status:r[e.errCode]||"",resultCode:e.errCode,data:e.data?e.data:"null"})},p=t=>{var n=new Date;const a=e.uri,r=t.extras&&t.extras.transactId,i=t.extras&&t.extras.statusCode,o=t.errCode;console.log(`api account ${e.uri} success. Cost: ${n-c} ms`),u(a,r,i,o,50008300)};if("action"in e)a.hmsjsb.invoke({apiName:"fg.request",args:{action:e.action,request:JSON.stringify(t),result_key:e.resultKey},success:d,fail:f});else{const n={...await l.assignCommonArgs(),...t},r=await s(e.uri,50008300),i={uri:e.uri,requestJson:JSON.stringify(n),transactId:r.data,service_action:"",api_name:"HuaweiID.API",api_level:1,kit_sdk_version:o,min_apk_version:3e7};a.hmsjsb.invoke({apiName:"bg.request",args:i,success:d,fail:f,complete:p})}}))},d={baseSignIn:async e=>await l._invoke({resultKey:"HUAWEIID_SIGNIN_RESULT",action:i.SIGN_IN},e),createResultObj:(e,t)=>e?{status:r[0],resultCode:"0",data:t}:{status:r[t],resultCode:t,data:"null"},formatSignInReqObj(e,t){const n=[],a=[];if(e)for(let t=0;t<e.length;t++){let a=e[t];n.push({permission:a})}if(t)for(let e=0;e<t.length;e++){let n=t[e];a.push({mScopeUri:n})}return{huaweiIdSignInOptions:{scopeArrayList:a,permissionArrayList:n}}}};var f=null,p=null;const v={TAG:"[JSB-Account]:",API:"HuaweiID.API",API_LEVEL:1,KIT_SDK:50005300,MIN_VER:4e7,Permission:{IDTOKEN:"idtoken",ACCESSTOKEN:"https://www.huawei.com/auth/account/base.profile/accesstoken"},Scope:{OPENID:"openid",BASEPROFILE:"https://www.huawei.com/auth/account/base.profile",EMAIL:"email",PROFILE:"profile",MOBILE_NUMBER:"https://www.huawei.com/auth/account/mobile.number",ACCOUNT_COUNTRY:"https://www.huawei.com/auth/account/country",ACCOUNT_BIRTHDAY:"https://www.huawei.com/auth/account/birthday",AGE_RANGE:"https://www.huawei.com/auth/account/age.range",DRIVE_APP_DATA:"https://www.huawei.com/auth/drive.appdata",CHECK_MOBILE:"https://www.huawei.com/auth/jos/checkmobile",SERVICE_LITE:"https://www.huawei.com/game/services.lite"},init(e,t){a.hmsjsb.init({NativeModules:e,DeviceEventEmitter:t})},destroy(){a.hmsjsb.destroy()},async signIn(e,t){const n=d.formatSignInReqObj(e,t),a=await d.baseSignIn(n);return p=n.huaweiIdSignInOptions.permissionArrayList,f=a,a},async silentSignIn(e,t){const n=d.formatSignInReqObj(e,t);p=n.huaweiIdSignInOptions.permissionArrayList;const a=await l._invoke({uri:i.HWID_SILENT_SIGNIN},n);return f=a,a},signInBackend:async()=>await l._invoke({uri:i.HWID_SIGN_IN_BACKEND}),cancelAuthorization:async()=>await l._invoke({uri:i.HWID_REVOKE_ACCESS}),signOut:async()=>await l._invoke({uri:i.HWID_SIGN_OUT}),async containScopes(e,t){if(e&&e.grantedScopes&&t){const n=[];Object.entries(e.grantedScopes).map((e=>n.push(e[1].mScopeUri)));const a=t.every((e=>n.includes(e)));return d.createResultObj(!0,a)}return d.createResultObj(!1,"-8")},async addAuthScope(e){if(f&&e){const t=[],n=[],a=f.data.grantedScopes,r=p;Object.entries(a).map((e=>t.push(e[1].mScopeUri))),Object.entries(r).map((e=>n.push(e[1].permission)));for(let n=0;n<e.length;n++)t.includes(e[n])||t.push(e[n]);const i=d.formatSignInReqObj(n,t);return await d.baseSignIn(i),d.createResultObj(!0,!0)}return d.createResultObj(!1,"-8")},getAuthResult:async()=>f?d.createResultObj(!0,f.data):d.createResultObj(!1,"-8"),async getAuthResultWithScopes(e){const t={extensionScopes:e||[]};if(f){const e={...f.data,...t};return d.createResultObj(!0,e)}return d.createResultObj(!1,"-8")},getChannel:async()=>await l._invoke({uri:i.HWID_GET_CHANNEL})}}},t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}return n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(841)})().default}));